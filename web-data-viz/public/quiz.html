<!DOCTYPE html>
<html lang="en">

<head>
    <!-- API GOOGLE FONTS -->

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&family=Poetsen+One&display=swap"
        rel="stylesheet">

    <!-- FIM API GOOGLE FONTS -->
    <link rel="stylesheet" href="./css/quiz.css">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>

    <nav class="navbar-inicial">
        <img src="./assets/logoval.png" alt="">
        <h1>ValLife</h1>
        <li class="lista-links">
            <a class="links-navbar" href="./index.html">Inicio</a>
            <a class="links-navbar" href="">Sobre mim</a>
            <a class="links-navbar" href="">Quiz</a>
            <a class="links-navbar" href="">Armas</a>
            <a class="links-navbar" href="">Agentes</a>
            <a class="links-navbar" href="">Mapas</a>
            <button class="login-navbar" onclick="location.href='./login.html'">Login</button>
        </li>
    </nav>

    <!-- <section class="section-quiz" id="section-quiz">

        <div class="global-quiz">
            <p>Você realmente conhece o Valorant?</p>


            <button onclick="quiz()" class="button-quiz start-quiz">
                <p>Inicie agora!</p>
                <div class="change-theme-button"></div>
            </button>

            <p>Preparamos um Quiz para você testar seu conhecimento sobre o jogo</p>
        </div>
    </section> -->

    <div class="container">
        <div class="questions-container hide">
            <span class="question">Pergunta aqui?</span>
            <div class="answers-container">
                <button class="answer button">Resposta 1</button>
                <button class="answer button">Resposta 2</button>
                <br>
                <button class="answer button">Resposta 3</button>
                <button class="answer button">Resposta 4</button>
            </div>
        </div>
        <div class="controls-container">
            <button class="start-quiz button">Começar Quiz!</button>
            <button class="next-question button hide">Próxima pergunta</button>
        </div>
    </div>

    <!-- <section class="quizes" id="quiz">

        <div id="quiz_one" class="all-quiz">
            <div class="all-quiz-text">
                <p>Qual ano foi lançado o Valorant?</p>
            </div>

            <div class="div_perguntas">
                <button class="alt1">2020</button>
                <button class="alt2">2021</button>
                <br>
                <button class="alt3">2019</button>
                <button class="alt4">2017</button>
            </div>

            <button id="next_question_button" class="next-question">Proxima pergunta</button>
        </div>


    </section> -->

</body>

</html>

<script>

    // document.querySelector('.button-quiz').onclick = function () {
    //     var sectionQuiz = document.getElementById('section-quiz');
    //     var quizes = document.getElementsByClassName('container')
    //     quizes.style.display = "block";
    //     sectionQuiz.style.display = 'none';
    // };

    const $startGameButton = document.querySelector(".start-quiz")
    const $nextQuestionButton = document.querySelector(".next-question")
    const $questionsContainer = document.querySelector(".questions-container")
    const $questionText = document.querySelector(".question")
    const $answersContainer = document.querySelector(".answers-container")
    const $answers = document.querySelectorAll(".answer")

    let currentQuestionIndex = 0
    let totalCorrect = 0

    $startGameButton.addEventListener("click", startGame)
    $nextQuestionButton.addEventListener("click", displayNextQuestion)

    function startGame() {
        $startGameButton.classList.add("hide")
        $questionsContainer.classList.remove("hide")
        displayNextQuestion()
    }

    function displayNextQuestion() {
        resetState()

        if (questions.length === currentQuestionIndex) {
            return finishGame()
        }

        $questionText.textContent = questions[currentQuestionIndex].question
        questions[currentQuestionIndex].answers.forEach(answer => {
            const newAsnwer = document.createElement("button")
            newAsnwer.classList.add("button", "answer")
            newAsnwer.textContent = answer.text
            if (answer.correct) {
                newAsnwer.dataset.correct = answer.correct
            }
            $answersContainer.appendChild(newAsnwer)

            newAsnwer.addEventListener("click", selectAnswer)
        })
    }

    function resetState() {
        while ($answersContainer.firstChild) {
            $answersContainer.removeChild($answersContainer.firstChild)
        }

        document.body.removeAttribute("class")
        $nextQuestionButton.classList.add("hide")
    }

    function selectAnswer(event) {
        const answerClicked = event.target

        if (answerClicked.dataset.correct) {
            document.body.classList.add("correct")
            totalCorrect++
        } else {
            document.body.classList.add("incorrect")
        }

        document.querySelectorAll(".answer").forEach(button => {
            button.disabled = true

            if (button.dataset.correct) {
                button.classList.add("correct")
            } else {
                button.classList.add("incorrect")
            }
        })

        $nextQuestionButton.classList.remove("hide")
        currentQuestionIndex++
    }

    function finishGame() {
        const totalQuestions = questions.length
        const performance = Math.floor(totalCorrect * 100 / totalQuestions)

        let message = ""

        switch (true) {
            case (performance >= 90):
                message = "Excelente :)"
                break
            case (performance >= 70):
                message = "Muito bom :)"
                break
            case (performance >= 50):
                message = "Bom"
                break
            default:
                message = "Pode melhorar :("
        }

        $questionsContainer.innerHTML =
            `
    <p class="final-message">
      Você acertou ${totalCorrect} de ${totalQuestions} questões!
      <span>Resultado: ${message}</span>
    </p>
    <button 
      onclick=window.location.reload() 
      class="button"
    >
      Refazer teste
    </button>
  `
    }


    const questions = [
        {
            question: "Dentro de qual elemento HTML colocamos o JavaScript?",
            answers: [
                { text: "<javascript>", correct: false },
                { text: "<js>", correct: false },
                { text: "<script>", correct: true },
                { text: "<scripting>", correct: false }
            ]
        },
        {
            question: "Onde é o lugar correto para inserir JavaScript?",
            answers: [
                { text: "Tanto no <head> quanto no <body> está correto", correct: true },
                { text: "No <body>", correct: false },
                { text: "No <head>", correct: false },
                { text: "Em outro lugar", correct: false }
            ]
        },
        {
            question: 'Qual é a sintaxe correta para se referir a um script externo chamado "xxx.js"',
            answers: [
                { text: '<script src="xxx.js">', correct: true },
                { text: '<script href="xxx.js">', correct: false },
                { text: '<script name="xxx.js">', correct: false },
                { text: "Nenhuma das alternativas", correct: false }
            ]
        },
        {
            question: 'O arquivo JavaScript externo deve conter a tag <script>',
            answers: [
                { text: "Verdadeiro", correct: false },
                { text: "Falso", correct: true }
            ]
        },
        {
            question: 'Como escrever "Hello World" numa caixa de alerta?',
            answers: [
                { text: 'msg("Hello World");', correct: false },
                { text: 'alert("Hello World");', correct: true },
                { text: 'msgBox("Hello World");', correct: false },
                { text: 'alertBox("Hello World");', correct: false }
            ]
        },
        {
            question: 'Como podemos criar uma função no JavaScript?',
            answers: [
                { text: 'function:myFunction()', correct: false },
                { text: 'function myFunction()', correct: true },
                { text: 'function = myFunction()', correct: false },
                { text: 'Nenhum desses códigos criaria uma função', correct: false }
            ]
        },
        {
            question: 'Como podemos chamar uma função chamada "minhaFuncao"?',
            answers: [
                { text: 'call minhaFuncao()', correct: false },
                { text: 'call function minhaFuncao()', correct: false },
                { text: 'Nenhum desses códigos chamaria essa função', correct: false },
                { text: 'minhaFuncao()', correct: true },
            ]
        },
    ]

</script>